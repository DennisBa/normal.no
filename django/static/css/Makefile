# Converts all less files to css and compress them.

.PHONY: all clean

# @todo prefix or put autogenerated css files in own directory?

LESSC=lessc
LESSCFLAGS=--no-js --clean-css
# Note: --clean-css compress a little bit better than --compress

cssfiles := $(patsubst %.less,%.css,$(wildcard *.less))


all: all.css tinymce.css

# content_css: '/static/css/tinymce.css
tinymce.css: style.css classes.css
	cat $^ > $@

all.css: $(cssfiles)
	cat $(cssfiles) > all.css

clean:
	rm -fv all.css tinymce.css
	rm -fv $(cssfiles)


%.css : %.less
	$(LESSC) $(LESSCFLAGS) $^ > $@
